[toc]

# 一. 计算机网络体系结构

知识预览：

<img src="https://image.sybblogs.fun/img-common/202402151754334.png" alt="计网体系结构" style="zoom: 25%;" />

网络：指的是网一样的东西或网状的系统。如：电信网络，通过电话线链路连接起来的网络。

计算机网络：是一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现**资源共享和信息传递**的系统。

<img src="https://image.sybblogs.fun/img-common/202402151800295.png" alt="计算机网络概念" style="zoom:25%;" />

如上图，计算机系统包括各种系统的手机端及电脑端。通过路由设备(也可以是中继器、交换机等)将这些系统用线路连接起来。这里的线路有的可以是逻辑线路，如手机和路由器连接。之后再由于功能完善的软件来实现资源共享和信息传递。同时还要有软件的支撑才能实现每个终端与终端之间的资源共享和信息传递。

简单来说计算机网络是一个互连的、自治的计算机集合。其中互连是指通过通信链路互联互通。自治是终端及各个节点之间是没有主从关系的，是高度自治的。

计算机网络有以下功能：

1. 数据通信

   如：两台电脑之间可以通过邮件传递信息。

2. 资源共享

   同一个计算机网络上的其他计算机可使用某台计算机的计算机资源的行为，可共享硬件、软件、数据等资源。

   硬件共享如：网络打印机。软件共享如：如远程访问另一台电脑上的软件。数据共享如：上传和下载文件。

3. 分布式处理

   多台计算机各自承担同一工作任务的不同部分。如：Hadoop分布式平台。

4. 提高可靠性

   分布式引申功能，可以提高网络可靠性。采用分布式处理如果网络中的一台主机宕机，就可以用另一台机器(替代机)来实现宕机计算机的任务。

5. 负载均衡

   也是分布式引申功能。由于使用了分布式可以让各个计算机之间更加亲密执行任务更加高效。

计算机网络的发展：

- 第一阶段

  美国国防部高级研究计划局(ARPA)设计一个分散的指挥系统，阿帕网：

  <img src="https://image.sybblogs.fun/img-common/202402151814583.png" alt="阿帕网" style="zoom:33%;" />

  如上图由四个分布在不同地区的节点组成。通过无线分组交换网及卫星通信网连接。可以看到如果其中一个节点失去连接，其他节点仍然可以继续通信。

  但是这样做有一个弊端：阿帕网只可以连接同一类型的网络。随着信息量的增长，希望可以实现不同网络的互连，互联网诞生了。

  之后在1983年阿帕网接受TCP$/$IP，选定Internet为主要的计算机通信系统。通过这个协议可以实现不同网络的连接。其中IP协议是基本的通信协议。TCP是帮助IP实现可靠传输的协议。所以这两个协议联合起来就可以实现网路的互联。即因特网。

  因特网也是现在全球范围内最大的互联网。所以上面的阿帕网就是因特网的前身。

  所以网络把许多计算机连接在一起，而互联网则把许多网络连接在一起，因特网是世界上最大的互联网。

- 第二阶段(三级结构)

  1985年起，美国国家科学基金会NSF围绕$6$个大型计算机中心建设计算机网络，即国家科学基金网NSFNET。

  这种网络是三层结构：

  第一层是企业网，这一层次用户如果想连接到互联网上需要再连接到第二层的地区网。并且第二次地区网会再连接到第一层的主干网。

  <img src="https://image.sybblogs.fun/img-common/202402151827939.png" alt="三级结构" style="zoom: 25%;" />

  随着网络发展越来越多的用户都可以连接到这个互联网中。所以就会导致网络的信息量急剧增大。政府决定把这些主干网交给一些私人公司来经营，并且开始对介入因特网的单位进行收费。这也就到了第三阶段。

- 第三阶段(多层次ISP结构)

  ISP即因特网服务提供者$/$因特网服务提供商，是一个向广大用户综合提供互联网接入业务、信息业务、和增值业务的公司，如中国电信、中国联动、中国移动等。且在层次上分为主干ISP、地区ISP和本地ISP

  <img src="https://image.sybblogs.fun/img-common/202402151835360.png" alt="多层次ISP结构" style="zoom:33%;" />

  其实这里也是沿用了之前的三层结构，只不过是把网络的管理权分散。用户通过支付给ISP服务费(网费)之后才能使用ISP服务，以申请到一个IP地址，就可以常有网络。

  具体做法是，全世界会有一个IP池，由一个因特网管理机构尽心管理。如果ISP供应商要给用户提供服务并分配IP，首先就要从IP池中申请一个IP地址，然后再分配给用户。这样每个用户就会有一个IP地址。

  只要每个本地ISP都安装路由器连接到了地区ISP，而地区ISP也由路由器连接到主干ISP，就可以完成因特网中所有数据分组转发任务。

  但是随着流量激增，人们对于网络要求也越来越高。就开始研究怎么更快地转发数据和分组。因此就诞生了上图地因特网交换点(IXP)。原本$A$和$B$两台计算机如果要通信的话，$A$计算机就需要经过一层又一层的ISP结构，通过本地ISP到地区ISP再到主干ISP。之后再通过主干ISP到地区ISP再到本地ISP，最后发送给$B$计算机。有了这个因特网交换点，就可以允许这两个网络直接相连，而不需要第三个网络来转发分组了。这个IXP出现也大大提高了信息传递和资源共享的速度。

计网概念功能总结：

<img src="https://image.sybblogs.fun/img-common/202402151852644.png" alt="计网概念功能总结" style="zoom:33%;" />

## 1. 计算机网络的组成

首先从组成部分上：计算机网络是由硬件、软件、协议(一系列规则和约定的集合)组成的。

硬件即终端系统和中间设备(如：路由器、交换机等)。软件就是在端系统上应用，甚至中间设备上也有软件。协议就是指定了各个硬件之间的通信的规则，计算机网络每个层次都有很多协议，根据这些协议就可以规定数据如何封装、打包、传输等。

<img src="https://image.sybblogs.fun/img-common/202402151856268.png" alt="计网组成" style="zoom:33%;" />

从工作方式上：可以把计算机网络分为边缘部分和核心部分。

- 边缘部分

  边缘部分就是一些端系统组成，这些端系统不仅包括计算机，还包括服务器，网络摄像头等设备。这些设备可以实时捕获信息，并将信息实时发布出去，这些都是边缘部分。

- 核心部分

  光有边缘部分还不够，还需要核心部分提供服务，边缘系统才能实现端系统与端系统之间的通信。核心部分包括路由器中间设备还有一些网络连接起来。核心部分和边缘部分连接起来就构成了计算机网络。

注意这里系统之间的通信是进程之间的通信。那么两个端系统进程之间的通信主要包括两种方式：

1. C$/$S方式

   即客户端到服务器端的通信方式。是因特网最传统最常用的服务。这种方式，多个端系统之间的进程呈现出服务与被服务的关系。

   与之对应还有一种B$/$S通信方式。这种方式与C$/$S类似，只不过客户端换成了浏览器。用户通过浏览器向目标服务器发送请求，之后服务器受到请求后将响应数据再发送给浏览器。

2. P2P方式

   即对等连接。这种情况下端系统身份都是对等的，都有提供服务的服务者和使用服务的享受者(客户端)的身份。

   如：磁力链下载。假如有$A,B,C,D$四台电脑，$A$下载$500$MB视频。P2P下载可以将$A$的$500$MB文件切分为几个大小不等$/$相等的数据块，$B$电脑会先拿到一部分数据块，如$250$MB。之后$B$又马上给$C$传输$200$MB，同时$B$还会继续接收$A$的块数据。$C$之后会把$150$MB分给$D$。同时$D$也可以向$A,B$继续发送请求获取数据块。

   所以可看到$B,C,D$即使客户端又是服务器。	

之前提到过计算机网路有两个功能分别是数据通信及资源共享。所以可以从功能组成方面分为：通信子网、资源子网。

- 通信子网可以实现数据通信。

  之前提到过计算机网络可以按照层次划分，在OSS参考模型中从上到下划分为七层：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层。

  其中下三层即网络层、数据链路层、物理层代表的就是通信子网，因为是由各种传输介质、通信设奋、相应的网络协议组成。

  通信子网可以让这个网络具有传输、交换、控制和存储功能，同时也能实现联网计算机之间的通信。

  这三层实现计算机通信设备有：网络层(路由器)、数据链路层(交换机、网桥)、物理层(集线器、中继器)。

  <img src="https://image.sybblogs.fun/img-common/202402151945463.png" alt="通信子网" style="zoom:33%;" />

- 资源子网可以实现资源共享$/$数据处理。

  上面三层，即应用层、表示层、会话层是资源子网。能实现资源共享功能的设备和软件的集合。

  资源子网可以向网络用户提供共享其他计算机上的硬件资源、软件资源和数据资源等服务。

  <img src="https://image.sybblogs.fun/img-common/202402151948705.png" alt="资源子网" style="zoom:33%;" />

其实可以理解为上三层是对数据的封装和处理。下三层就是将这个数据送往上层。中间的传输层起到很重要的媒介作用，其大致作用是为了弥补上三层要求的服务和网络层提供的服务之间的差距，并且向高层用户屏蔽通信子网当中的一些细节，可以说传输层起到了承上启下的作用。

## 2. 计算机网络的分类

计算机网络按照性质不同可以分为以下几类：

- 按分布范围：分广域网WAN、城域网MAN、局域网LAN、个人区域网PAN

  最广的范围是广域网，分布范围从几十到几千公里，是因特网的核心部分。它的任务是通过长距离来发送数据。

  城域网能覆盖一个城市。而局域网在地理上是一个较小的范围，如：一个学校、一个办公楼等。

  最后个人区域网就是将如电脑、手表等通过无线技术连接起来的网络，也成为无线个人区域网。

  这里主要学习广域网和局域网，这两个网络通常使用广播技术。这种网络类型不仅仅是地理上的差别，更重要的是看使用的是什么技术，广域网用的是交换技术、局域网用的是广播技术。

- 按照使用者分：公用网、专用网。

  公用网如中国移动、中国联通等。

  专用网(内网)是某个部门或者行业为了特殊用途需要构建的网络。如：军队、企业部门等。

- 按照交换技术来分：电路交换、报文交换、分组交换。

  这几种方式讲的是数据传输方式。

  电路交换如：打电话。原理是首先会建立连接，占用一个通信资源。之后通话过程中会一直占用这个资源。最后打完电话后会释放链接归还通信资源。有这三个步骤的交换方式是电路交换。所以电路交换特点就是在通话的全部时间内通话的两个人是完全占有中间的资源不能被别人使用。

  报文交换和分组交换技术特点是都使用存储转发技术。主要区别是主体不一样：分组就是将报文数据切开分成不同的组。报文就是一个完整的文件。

  报文交换和分组交换存储转发就是现在要发送的数据首先要放到路由器上传输，此时路由器会存下来这个数据来检查要往哪发，之后再转发出去转发给正确的路由方向。

- 按照拓扑结构可以分为以下结构：

  <img src="https://image.sybblogs.fun/img-common/202402152013598.png" alt="拓扑结构分类" style="zoom:33%;" />

  拓扑结构其实就是把网络中节点(可以是路由器、交换机这些中间设备，也可以是端系统中的主机)，变成上图中的小圆圈。把通信链路抽象成一条线。将圆圈和线结合在一起就是上面拓扑结构。

  常见的拓扑结构如上图。可以看到总线型所有的节点都连接在一条总线上。星型就是由中间节点向四周节点四散。环形就是将节点链接成环状。最后的网状型就是现在常用的拓扑结构，常用于广域网。

- 按照传输技术分：广播式网络、点对点网络

  广播式网络是共享公共通信信道，常应用在局域网中。用的是总线型的拓扑结构。特点是一个节点(主机)发送消息，其他都可以收到。

  点对点网络是使用分组存储转发和路由选择机制。常应用在广域网中，广域网基本都是点对点的网络。指的是在网络当中如果两台主机需要通信，但是没有直接连接，就需要很多中间节点实现分组存储转发和路由的选择。特点是发送消息只有被接受方可以听到，其他节点都接受不到消息。

计算机网络组成和分类总结：

<img src="https://image.sybblogs.fun/img-common/202402152025119.png" alt="计算机网络组成和分类总结" style="zoom:33%;" />